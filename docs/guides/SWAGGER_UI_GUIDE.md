# 📖 Как использовать Swagger UI для анализа документации

## Шаг 1: Откройте Swagger UI

Перейдите на: **http://localhost:8000/docs**

Вы увидите список всех API endpoints.

---

## Шаг 2: Найдите нужный endpoint

Найдите и откройте:
```
POST /api/v1/review/start
```

Нажмите на него, чтобы развернуть.

---

## Шаг 3: Нажмите "Try it out"

Нажмите кнопку **"Try it out"** (справа вверху)

---

## Шаг 4: Заполните запрос

После нажатия "Try it out" вы увидите форму с тремя полями:

### Поле 1: `document` (обязательное)

**Это самое важное поле!** Сюда нужно вставить содержимое вашей документации.

**Как получить содержимое файла:**

1. Откройте ваш файл в текстовом редакторе
2. Выделите весь текст (Ctrl+A)
3. Скопируйте (Ctrl+C)
4. Вставьте в поле `document` в Swagger UI (Ctrl+V)

**Пример:**
```json
{
  "document": "# Моя документация\n\n## Раздел 1\n\nТекст документации...",
  "document_type": "markdown",
  "context": {}
}
```

### Поле 2: `document_type` (опциональное)

Оставьте значение по умолчанию: `"markdown"`

Или укажите другой тип, если ваша документация в другом формате.

### Поле 3: `context` (опциональное)

Оставьте пустым объектом: `{}`

Или добавьте контекст, например:
```json
{
  "project_type": "microservices",
  "requirements": ["security", "scalability"]
}
```

---

## Шаг 5: Нажмите "Execute"

После заполнения всех полей нажмите кнопку **"Execute"** (внизу формы)

---

## Шаг 6: Получите результат

Вы увидите ответ с `task_id`:

```json
{
  "task_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "started",
  "estimated_time": 180
}
```

**Сохраните `task_id`** - он понадобится для получения результатов!

---

## Шаг 7: Проверьте статус

Найдите endpoint:
```
GET /api/v1/review/{task_id}/status
```

1. Нажмите на него
2. Нажмите "Try it out"
3. Вставьте ваш `task_id` в поле `task_id`
4. Нажмите "Execute"

Вы увидите статус задачи:
- `pending` - ожидает обработки
- `in_progress` - обрабатывается
- `completed` - завершена
- `failed` - ошибка

---

## Шаг 8: Получите результаты

Когда статус станет `completed`, найдите endpoint:
```
GET /api/v1/review/{task_id}/results
```

1. Нажмите на него
2. Нажмите "Try it out"
3. Вставьте ваш `task_id`
4. Нажмите "Execute"

Вы получите полный отчет с найденными проблемами и рекомендациями.

---

## Шаг 9: Получите отчет в Markdown

Для получения отчета в формате Markdown используйте:
```
GET /api/v1/review/{task_id}/report?format=markdown
```

Это вернет полный отчет, который можно сохранить в файл.

---

## 💡 Советы

### Как правильно заполнить поле `document`

1. **Откройте файл** с документацией в текстовом редакторе
2. **Скопируйте весь текст** (Ctrl+A, Ctrl+C)
3. **Вставьте в Swagger UI** в поле `document`

**Важно:** 
- Вставляйте весь текст документации
- Сохраняйте форматирование (переносы строк, заголовки)
- Не добавляйте лишние кавычки или символы

### Если получаете ошибку 422

Это означает проблему с форматом JSON. Проверьте:
- Правильно ли экранированы кавычки в тексте
- Нет ли неэкранированных управляющих символов
- Правильно ли заполнены все поля

**Решение:** Используйте Python скрипт для отправки запроса (см. [USER_GUIDE.md](USER_GUIDE.md))

---

## 📚 Дополнительная информация

- **Полное руководство**: [USER_GUIDE.md](USER_GUIDE.md)
- **Примеры использования**: [examples/load_documentation.py](../../examples/load_documentation.py)
- **Решение проблем**: [../troubleshooting/](../troubleshooting/)
