# üîß –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è JSON

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ JSON –≤ Swagger UI –≤—Ä—É—á–Ω—É—é –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏:
```
422 Error: Invalid control character at
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

Python's `json.dumps()` **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç** –≤—Å–µ —Å–∏–º–≤–æ–ª—ã:

### –ß—Ç–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è:

1. **–î–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏**: `"` ‚Üí `\"`
   ```json
   "text": "–°–ª–æ–≤–æ \"NULL\" –≤ –∫–∞–≤—ã—á–∫–∞—Ö"
   ```

2. **–ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫**: `\n` ‚Üí `\\n`
   ```json
   "text": "–°—Ç—Ä–æ–∫–∞ 1\\n–°—Ç—Ä–æ–∫–∞ 2"
   ```

3. **–û–±—Ä–∞—Ç–Ω—ã–µ —Å–ª–µ—à–∏**: `\` ‚Üí `\\`
   ```json
   "text": "–ü—É—Ç—å: C:\\\\Windows"
   ```

4. **–£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã**: –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö

### –°–∫—Ä–∏–ø—Ç `show_file_content_json.py`

```python
# 1. –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
document = file.read_text()

# 2. –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç
request_body = {
    "document": document,  # –¢–µ–∫—Å—Ç —Å –∫–∞–≤—ã—á–∫–∞–º–∏, –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫ –∏ —Ç.–¥.
    "document_type": "markdown",
    "context": {}
}

# 3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ JSON (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
json_string = json.dumps(request_body, ensure_ascii=False, indent=2)
# json.dumps() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –í–°–ï —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã!
```

### –°–∫—Ä–∏–ø—Ç `send_review_request.py`

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç requests.post —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º json=
response = requests.post(
    url,
    json=request_data  # requests –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç!
)
```

**–≠—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±!** `requests` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Content-Type
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã

```bash
# –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –±–µ–∑ –æ—à–∏–±–æ–∫
python send_review_request.py
```

### ‚ö†Ô∏è –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Swagger UI

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `show_file_content_json.py` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JSON
2. –ö–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å JSON —Ü–µ–ª–∏–∫–æ–º
3. –í Swagger UI –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç `application/json`
4. –í—Å—Ç–∞–≤—å—Ç–µ JSON

**–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –æ—à–∏–±–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `send_review_request.py`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:
```bash
python test_json_escaping.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ JSON –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ –ö–∞–∫–∏–µ —Å–∏–º–≤–æ–ª—ã —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤—ã–π JSON –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:**
```
–¢–µ–∫—Å—Ç —Å "–∫–∞–≤—ã—á–∫–∞–º–∏" –∏
–ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫–∏
```

**–í JSON (–ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ):**
```json
{
  "document": "–¢–µ–∫—Å—Ç —Å \"–∫–∞–≤—ã—á–∫–∞–º–∏\" –∏\n–ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫–∏"
}
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
- `"` ‚Üí `\"` (–∫–∞–≤—ã—á–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã)
- `\n` ‚Üí `\\n` (–ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω)

## ‚úÖ –í—ã–≤–æ–¥

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã** - –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã!

- `send_review_request.py` - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- `show_file_content_json.py` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JSON –¥–ª—è Swagger UI
- `test_json_escaping.py` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `json.dumps()`, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

